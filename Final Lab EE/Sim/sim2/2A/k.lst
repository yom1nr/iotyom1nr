
ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 1





       MCS-51 Family Macro Assembler   A S E M - 5 1   V 1.3
       =====================================================



	Source File:	C:\Users\ASUS\OneDrive\Desktop\áÅ»\All exam lab\2A\k.Asm
	Object File:	C:\Users\ASUS\OneDrive\Desktop\áÅ»\All exam lab\2A\k.hex
	List File:	C:\Users\ASUS\OneDrive\Desktop\áÅ»\All exam lab\2A\k.lst



 Line  I  Addr  Code            Source

    1:		N      0001	kDelay EQU 1
    2:				; if Run on board >> kDelay EQU 25
    3:				; if SimmulaOon >> kDelay EQU 1
    4:		B      0094	LF_SEG EQU P1.4
    5:		B      0095	RG_SEG EQU P1.5
    6:		D      0080	PT_SEG EQU P0
    7:		B      00A7	pData EQU P2.7
    8:		B      00A6	pClock EQU P2.6
    9:		B      00A5	pLatch EQU P2.5
   10:		N      0000	 ORG 0000H
   11:	  0000	21 00		 JMP 0100H
   12:
   13:		N      0100	 ORG 0100H
   14:	  0100	75 81 2F	 MOV SP,#2FH
   15:	  0103	C2 94		 CLR LF_SEG
   16:	  0105	C2 95		 CLR RG_SEG
   17:
   18:	  0107	90 00 01	LOOP: MOV DPTR,#0001H
   19:	  010A	12 01 69	 CALL Send16_LED
   20:	  010D	90 00 02	 MOV DPTR,#0002H
   21:	  0110	12 01 69	 CALL Send16_LED
   22:	  0113	90 00 04	 MOV DPTR,#0004H
   23:	  0116	12 01 69	 CALL Send16_LED
   24:	  0119	90 00 08	 MOV DPTR,#0008H
   25:	  011C	12 01 69	 CALL Send16_LED
   26:	  011F	90 00 10	 MOV DPTR,#0010H
   27:	  0122	12 01 69	 CALL Send16_LED
   28:	  0125	90 00 20	 MOV DPTR,#0020H
   29:	  0128	12 01 69	 CALL Send16_LED
   30:	  012B	90 00 40	 MOV DPTR,#0040H
   31:	  012E	12 01 69	 CALL Send16_LED
   32:	  0131	90 00 80	 MOV DPTR,#0080H
   33:	  0134	12 01 69	 CALL Send16_LED
   34:	  0137	90 01 00	 MOV DPTR,#0100H
   35:	  013A	12 01 69	 CALL Send16_LED
   36:	  013D	90 02 00	 MOV DPTR,#0200H
   37:	  0140	12 01 69	 CALL Send16_LED
   38:	  0143	90 04 00	 MOV DPTR,#0400H
   39:	  0146	12 01 69	 CALL Send16_LED
   40:	  0149	90 08 00	 MOV DPTR,#0800H
   41:	  014C	12 01 69	 CALL Send16_LED
   42:	  014F	90 10 00	 MOV DPTR,#1000H
   43:	  0152	12 01 69	 CALL Send16_LED

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 2



 Line  I  Addr  Code            Source

   44:	  0155	90 20 00	 MOV DPTR,#2000H
   45:	  0158	12 01 69	 CALL Send16_LED
   46:	  015B	90 40 00	 MOV DPTR,#4000H
   47:	  015E	12 01 69	 CALL Send16_LED
   48:	  0161	90 80 00	 MOV DPTR,#8000H
   49:	  0164	12 01 69	 CALL Send16_LED
   50:	  0167	80 9E		 JMP LOOP
   51:
   52:	  0169			 Send16_LED:
   53:	  0169	E5 82		 MOV A,DPL
   54:	  016B	12 01 86	 CALL ShiO8
   55:	  016E	E5 83		 MOV A,DPH
   56:	  0170	12 01 86	 CALL ShiO8
   57:	  0173	C2 A5		 CLR pLatch
   58:	  0175	D2 A5		 SETB pLatch
   59:	  0177	12 01 94	 CALL Display_DPTR
   60:	  017A	7F 0A		 MOV R7,#10
   61:	  017C	7E 01		_Wait0: MOV R6,#kDelay
   62:	  017E	12 01 E0	_Wait1: CALL DELAY
   63:	  0181	DE FB		 DJNZ R6,_Wait1
   64:	  0183	DF F7		 DJNZ R7,_Wait0
   65:	  0185	22		 RET
   66:	  0186	75 F0 08	ShiO8: MOV B,#8
   67:	  0189	13		_ShiO: RRC A
   68:	  018A	92 A7		 MOV pData,C
   69:	  018C	C2 A6		 CLR pClock
   70:	  018E	D2 A6		 SETB pClock
   71:	  0190	D5 F0 F6	 DJNZ B,_ShiO
   72:	  0193	22		 RET
   73:	  0194			Display_DPTR:
   74:	  0194	74 10		 MOV A,#10H
   75:	  0196	12 01 AE	 CALL _Send1Seg
   76:	  0199	E5 83		 MOV A,DPH
   77:	  019B	12 01 A4	 CALL _Send2HEX
   78:	  019E	E5 82		 MOV A,DPL
   79:	  01A0	12 01 A4	 CALL _Send2HEX
   80:	  01A3	22		 RET
   81:	  01A4			_Send2HEX:
   82:	  01A4	C0 E0		 PUSH Acc
   83:	  01A6	C4		 SWAP A
   84:	  01A7	12 01 AC	 CALL _Send1HEX
   85:	  01AA	D0 E0		 POP Acc
   86:	  01AC			_Send1HEX:
   87:	  01AC	54 0F		 ANL A,#0FH
   88:	  01AE			_Send1Seg:
   89:	  01AE	C0 83		 PUSH DPH
   90:	  01B0	C0 82		 PUSH DPL
   91:	  01B2	90 01 CF	 MOV DPTR,#T_SEG
   92:	  01B5	93		 MOVC A,@A+DPTR
   93:	  01B6	F4		 CPL A
   94:	  01B7	F5 80		 MOV PT_SEG,A
   95:	  01B9	D0 82		 POP DPL
   96:	  01BB	D0 83		 POP DPH
   97:	  01BD	7F 01		 MOV R7,#kDelay
   98:	  01BF	12 01 E0	_Wait2: CALL DELAY
   99:	  01C2	DF FB		 DJNZ R7,_Wait2

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 3



 Line  I  Addr  Code            Source

  100:	  01C4	75 80 FF	 MOV PT_SEG,#0FFH
  101:	  01C7	7F 01		 MOV R7,#kDelay
  102:	  01C9	12 01 E0	_Wait3: CALL DELAY
  103:	  01CC	DF FB		 DJNZ R7,_Wait3
  104:	  01CE	22		 RET
  105:	  01CF	77 11 6D 5D	T_SEG: DB 77H, 11H, 6DH, 5DH, 1BH, 5EH, 7EH, 15H ; Code 0123 4567
	  01D3	1B 5E 7E 15
  106:	  01D7	7F 5F 3F 7A	 DB 7FH, 5FH, 3FH, 7AH, 66H, 79H, 6EH, 2EH ; Code 89ab cdef
	  01DB	66 79 6E 2E
  107:	  01DF	08		 DB 08H
  108:
  109:	  01E0	75 F0 01	Delay: MOV B,#kDelay
  110:	  01E3	74 FA		 MOV A,#250
  111:	  01E5	D5 E0 FD	_DLY00: DJNZ Acc,_DLY00
  112:	  01E8	D5 F0 FA	 DJNZ B,_DLY00
  113:	  01EB	22		 RET
  114:				 END





                     register banks used:  ---

                     no errors




ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 4





	       L I S T   O F   S Y M B O L S
	       =============================


SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
??ASEM_51			  NUMBER    8051
??VERSION			  NUMBER    0130
AC				  BIT	      D6
ACC				  DATA	      E0
B				  DATA	      F0
CY				  BIT	      D7
DELAY				  CODE	    01E0	 109
DISPLAY_DPTR			  CODE	    0194	  73
DPH				  DATA	      83
DPL				  DATA	      82
EA				  BIT	      AF
ES				  BIT	      AC
ET0				  BIT	      A9
ET1				  BIT	      AB
EX0				  BIT	      A8
EX1				  BIT	      AA
EXTI0				  CODE	    0003
EXTI1				  CODE	    0013
F0				  BIT	      D5
IE				  DATA	      A8
IE0				  BIT	      89
IE1				  BIT	      8B
INT0				  BIT	      B2
INT1				  BIT	      B3
IP				  DATA	      B8
IT0				  BIT	      88
IT1				  BIT	      8A
KDELAY				  NUMBER    0001	   1
LF_SEG				  NUMBER    0094	   4
LOOP				  CODE	    0107	  18
OV				  BIT	      D2
P				  BIT	      D0
P0				  DATA	      80
P1				  DATA	      90
P2				  DATA	      A0
P3				  DATA	      B0
PCLOCK				  NUMBER    00A6	   8
PCON				  DATA	      87
PDATA				  NUMBER    00A7	   7
PLATCH				  NUMBER    00A5	   9
PS				  BIT	      BC
PSW				  DATA	      D0
PT0				  BIT	      B9
PT1				  BIT	      BB
PT_SEG				  NUMBER    0080	   6
PX0				  BIT	      B8
PX1				  BIT	      BA
RB8				  BIT	      9A
RD				  BIT	      B7
REN				  BIT	      9C

ASEM-51 V1.3                                         Copyright (c) 2002 by W.W. Heinz                                         PAGE 5



SYMBOL				  TYPE     VALUE	LINE
------------------------------------------------------------
RESET				  CODE	    0000
RG_SEG				  NUMBER    0095	   5
RI				  BIT	      98
RS0				  BIT	      D3
RS1				  BIT	      D4
RXD				  BIT	      B0
SBUF				  DATA	      99
SCON				  DATA	      98
SEND16_LED			  CODE	    0169	  52
SHIO8				  CODE	    0186	  66
SINT				  CODE	    0023
SM0				  BIT	      9F
SM1				  BIT	      9E
SM2				  BIT	      9D
SP				  DATA	      81
T0				  BIT	      B4
T1				  BIT	      B5
TB8				  BIT	      9B
TCON				  DATA	      88
TF0				  BIT	      8D
TF1				  BIT	      8F
TH0				  DATA	      8C
TH1				  DATA	      8D
TI				  BIT	      99
TIMER0				  CODE	    000B
TIMER1				  CODE	    001B
TL0				  DATA	      8A
TL1				  DATA	      8B
TMOD				  DATA	      89
TR0				  BIT	      8C
TR1				  BIT	      8E
TXD				  BIT	      B1
T_SEG				  CODE	    01CF	 105
WR				  BIT	      B6
_DLY00				  CODE	    01E5	 111
_SEND1HEX			  CODE	    01AC	  86
_SEND1SEG			  CODE	    01AE	  88
_SEND2HEX			  CODE	    01A4	  81
_SHIO				  CODE	    0189	  67
_WAIT0				  CODE	    017C	  61
_WAIT1				  CODE	    017E	  62
_WAIT2				  CODE	    01BF	  98
_WAIT3				  CODE	    01C9	 102
